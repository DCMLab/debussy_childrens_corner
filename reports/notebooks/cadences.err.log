Traceback (most recent call last):
  File "/home/runner/.local/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 646, in run_until_complete
    return future.result()
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
annotated_view = dataset.data.get_view('annotated')
annotated_view.include('facets', 'expanded')
annotated_view.fnames_with_incomplete_facets = False
dataset.data.set_view(annotated_view)
dataset.data.parse_tsv(choose='auto')
dataset.get_indices()
dataset.data
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mTypeError[0m                                 Traceback (most recent call last)
Cell [0;32mIn[5], line 5[0m
[1;32m      3[0m annotated_view[38;5;241m.[39mfnames_with_incomplete_facets [38;5;241m=[39m [38;5;28;01mFalse[39;00m
[1;32m      4[0m dataset[38;5;241m.[39mdata[38;5;241m.[39mset_view(annotated_view)
[0;32m----> 5[0m [43mdataset[49m[38;5;241;43m.[39;49m[43mdata[49m[38;5;241;43m.[39;49m[43mparse_tsv[49m[43m([49m[43mchoose[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mauto[39;49m[38;5;124;43m'[39;49m[43m)[49m
[1;32m      6[0m dataset[38;5;241m.[39mget_indices()
[1;32m      7[0m dataset[38;5;241m.[39mdata

File [0;32m~/.local/lib/python3.10/site-packages/ms3/parse.py:1654[0m, in [0;36mParse.parse_tsv[0;34m(self, view_name, level, cols, infer_types, only_new, choose, **kwargs)[0m
[1;32m   1652[0m     [38;5;28mself[39m[38;5;241m.[39mchange_logger_cfg(level[38;5;241m=[39mlevel)
[1;32m   1653[0m [38;5;28;01mfor[39;00m corpus_name, corpus [38;5;129;01min[39;00m [38;5;28mself[39m[38;5;241m.[39miter_corpora(view_name[38;5;241m=[39mview_name):
[0;32m-> 1654[0m     [43mcorpus[49m[38;5;241;43m.[39;49m[43mparse_tsv[49m[43m([49m[43mview_name[49m[38;5;241;43m=[39;49m[43mview_name[49m[43m,[49m
[1;32m   1655[0m [43m                     [49m[43mcols[49m[38;5;241;43m=[39;49m[43mcols[49m[43m,[49m
[1;32m   1656[0m [43m                     [49m[43minfer_types[49m[38;5;241;43m=[39;49m[43minfer_types[49m[43m,[49m
[1;32m   1657[0m [43m                     [49m[43monly_new[49m[38;5;241;43m=[39;49m[43monly_new[49m[43m,[49m
[1;32m   1658[0m [43m                     [49m[43mchoose[49m[38;5;241;43m=[39;49m[43mchoose[49m[43m,[49m
[1;32m   1659[0m [43m                     [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m

File [0;32m~/.local/lib/python3.10/site-packages/ms3/corpus.py:1597[0m, in [0;36mCorpus.parse_tsv[0;34m(self, view_name, cols, infer_types, level, only_new, choose, **kwargs)[0m
[1;32m   1595[0m [38;5;28;01mif[39;00m level [38;5;129;01mis[39;00m [38;5;129;01mnot[39;00m [38;5;28;01mNone[39;00m:
[1;32m   1596[0m     [38;5;28mself[39m[38;5;241m.[39mchange_logger_cfg(level[38;5;241m=[39mlevel)
[0;32m-> 1597[0m fname2files [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mget_files[49m[43m([49m[38;5;124;43m'[39;49m[38;5;124;43mtsv[39;49m[38;5;124;43m'[39;49m[43m,[49m[43m [49m[43mview_name[49m[38;5;241;43m=[39;49m[43mview_name[49m[43m,[49m[43m [49m[43mparsed[49m[38;5;241;43m=[39;49m[38;5;129;43;01mnot[39;49;00m[43m [49m[43monly_new[49m[43m,[49m[43m [49m[43mchoose[49m[38;5;241;43m=[39;49m[43mchoose[49m[43m,[49m[43m [49m[43mflat[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m)[49m
[1;32m   1598[0m selected_files [38;5;241m=[39m [38;5;28msum[39m(fname2files[38;5;241m.[39mvalues(), start[38;5;241m=[39m[])
[1;32m   1599[0m target [38;5;241m=[39m [38;5;28mlen[39m(selected_files)

File [0;32m~/.local/lib/python3.10/site-packages/ms3/corpus.py:990[0m, in [0;36mCorpus.get_files[0;34m(self, facets, view_name, parsed, unparsed, choose, flat, include_empty)[0m
[1;32m    988[0m     choose [38;5;241m=[39m [38;5;124m'[39m[38;5;124mauto[39m[38;5;124m'[39m
[1;32m    989[0m result [38;5;241m=[39m {}
[0;32m--> 990[0m [38;5;28;01mfor[39;00m fname, piece [38;5;129;01min[39;00m [38;5;28mself[39m[38;5;241m.[39miter_pieces(view_name[38;5;241m=[39mview_name):
[1;32m    991[0m     facet2files [38;5;241m=[39m piece[38;5;241m.[39mget_files(facets[38;5;241m=[39mfacets,
[1;32m    992[0m                                 view_name[38;5;241m=[39mview_name,
[1;32m    993[0m                                 parsed[38;5;241m=[39mparsed,
[0;32m   (...)[0m
[1;32m    996[0m                                 flat[38;5;241m=[39mflat,
[1;32m    997[0m                                 include_empty[38;5;241m=[39minclude_empty)
[1;32m    998[0m     [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m include_empty:

File [0;32m~/.local/lib/python3.10/site-packages/ms3/corpus.py:1291[0m, in [0;36mCorpus.iter_pieces[0;34m(self, view_name)[0m
[1;32m   1289[0m [38;5;28;01mfor[39;00m fname, piece [38;5;129;01min[39;00m view[38;5;241m.[39mfilter_by_token([38;5;124m'[39m[38;5;124mfnames[39m[38;5;124m'[39m, [38;5;28mself[39m):
[1;32m   1290[0m     metadata_check [38;5;241m=[39m [38;5;129;01mnot[39;00m differentiate_by_presence_in_metadata [38;5;129;01mor[39;00m fname [38;5;129;01min[39;00m selected_fnames
[0;32m-> 1291[0m     facet_check [38;5;241m=[39m [38;5;129;01mnot[39;00m filter_incomplete_facets [38;5;129;01mor[39;00m [43mpiece[49m[38;5;241;43m.[39;49m[43mall_facets_present[49m[43m([49m[43mview_name[49m[38;5;241;43m=[39;49m[43mview_name[49m[43m,[49m
[1;32m   1292[0m [43m                                                                           [49m[43mselected_facets[49m[38;5;241;43m=[39;49m[43mselected_facets[49m[43m)[49m
[1;32m   1293[0m     [38;5;28;01mif[39;00m metadata_check [38;5;129;01mand[39;00m facet_check:
[1;32m   1294[0m         [38;5;28;01mif[39;00m view_name [38;5;129;01mnot[39;00m [38;5;129;01min[39;00m piece[38;5;241m.[39m_views:

File [0;32m~/.local/lib/python3.10/site-packages/ms3/piece.py:98[0m, in [0;36mPiece.all_facets_present[0;34m(self, view_name, selected_facets)[0m
[1;32m     96[0m [38;5;28;01melse[39;00m:
[1;32m     97[0m     facets [38;5;241m=[39m resolve_facets_param(selected_facets, none_means_all[38;5;241m=[39m[38;5;28;01mFalse[39;00m)
[0;32m---> 98[0m     missing [38;5;241m=[39m [f [38;5;28;01mfor[39;00m f [38;5;129;01min[39;00m facets [38;5;28;01mif[39;00m f [38;5;129;01mnot[39;00m [38;5;129;01min[39;00m view_facets]
[1;32m     99[0m     [38;5;28;01mif[39;00m [38;5;28mlen[39m(missing) [38;5;241m>[39m [38;5;241m0[39m:
[1;32m    100[0m         plural [38;5;241m=[39m [38;5;124m'[39m[38;5;124ms are[39m[38;5;124m'[39m [38;5;28;01mif[39;00m [38;5;28mlen[39m(missing) [38;5;241m>[39m [38;5;241m1[39m [38;5;28;01melse[39;00m [38;5;124m'[39m[38;5;124m is[39m[38;5;124m'[39m

[0;31mTypeError[0m: 'NoneType' object is not iterable
TypeError: 'NoneType' object is not iterable

